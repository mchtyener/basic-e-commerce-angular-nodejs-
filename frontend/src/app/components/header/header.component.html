<div class="fixed-top">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" routerLink="/">Navbar</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <ng-container *ngIf="headers$ | async as headers">
            <ng-container *ngIf="headers.length > 0;">
              <li *ngFor="let item of headers" class="nav-item"
                [ngClass]="{'dropdown': item.subHeaders && item.subHeaders.length > 0}">
                <a class="nav-link" [routerLink]="item.url" (click)="setActive(item)"
                  [attr.aria-expanded]="item.subHeaders && item.subHeaders.length > 0 ? 'true' : 'false'"
                  [attr.data-bs-toggle]="item.subHeaders && item.subHeaders.length > 0 ? 'dropdown' : null">
                  {{ item.title }}
                </a>

                <ul *ngIf="item.subHeaders" class="dropdown-menu">
                  <li *ngFor="let subHeader of item.subHeaders">
                    <a class="dropdown-item" [routerLink]="subHeader.url" (click)="setActive(subHeader)">
                      {{ subHeader.title }}
                    </a>
                  </li>
                </ul>
              </li>
            </ng-container>
          </ng-container>
        </ul>

        <ul class="navbar-nav d-flex align-items-center">
          <li class="nav-item">
            <select #langSelect class="form-select" (change)="translateService.use(langSelect.value)">
              <option *ngFor="let lang of translateService.getLangs()" [value]="lang"
                [selected]="lang === translateService.currentLang">
                {{ lang }}
              </option>
            </select>
          </li>
          <ng-container *ngIf="!userService.isLoggedInSignal(); else login">
            <li class="nav-item d-flex">
              <a (click)="openLoginModal()" class="nav-link btn btn-outline-primary me-2">{{ 'AUTH.LOGIN' | translate
                }}</a>
              <a (click)="openRegisterModal()" class="nav-link btn btn-outline-primary">{{ 'AUTH.REGISTER' | translate
                }}</a>
            </li>
          </ng-container>
          <ng-template #login>
            <li class="nav-item d-flex">
              <button type="button" class="btn btn-primary me-2 mx-2" (click)="openCart()">Cart</button>
              <button *ngIf="userService?.userInformation()" type="button" class="btn btn-secondary"
                (click)="openMyAccount()">{{userService.userInformation()?.firstName}}</button>
              <a (click)="logout()" class="nav-link btn btn-danger mx-2">{{'AUTH.LOGOUT' | translate}}</a>
            </li>
          </ng-template>
        </ul>
      </div>
    </div>
  </nav>
</div>